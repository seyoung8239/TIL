---
createdAt: 2023-03-24
title: 컴퓨터구조 보조기억장치
summary: 대표적인 보조기억장치인 HDD, 플래시에 메모리에 대해 알아보고 이를 더 유용하게 사용할 수 있는 RAID 기법에 대해 알아보자.
categories: ['computer structure', 'secondary storage', 'hdd', 'sdd', 'RAID']
---
# 다양한 보조기억장치

## 하드 디스크

- Hard Disk Drive는 자기적인 방식으로 데이터를 저장하는 보조기억장치 이다.
- 그래서 magnetic disk라고 부르기도 한다
- HDD는 동그란 원판에 데이터를 저장하고, 뾰족한 리더기로 데이터를 읽는다는 점에서 CD와 LP와 비슷하다

HDD의 구성 요소는 아래와 같다

### 플래터 platter

하드 디스크에서 데이터가 실질적으로 저장되는 부분이다. platter는 자기 물질로 덮여 있어 수 많은 N극과 S극을 저장한다. 각 N, S극은 0과 1을 의미한다

### 스핀들 Spindle

- 플래터를 회전시키는 구성 요소를 일컫는 단어이다
- 스핀들이 플래터를 회전시키는 속도의 단위로 RPM을 사용한다

### 헤드와 디스크 암

- 헤드는 플래터 위에 미세하기 떠서 데이터를 읽고 쓴다
- 헤드가 원하는 위치로 이동할 수 있도록 도우는 부품이 디스크 암이다

### 플래터의 구성요소

- 플래터는 트랙과 색터라는 단위로 데이터를 저장한다
- 플래터를 여러 동심원으로 나누었을 때 그 중 하나의 원을 트랙이라고 부른다.
- 하나의 트랙을 쪼갠 단위가 섹터이다.
- 섹터는 하드 디스크의 가장 작은 전송 단위이다
- 다수의 섹터를 엮어 블록이라고 하기도 한다
- 여러 겹의 플래터에서 같은 위치에 존재하는 트랙의 집합을 실린더라고 부른다
- 연속된 정보는 하나의 실린더에 저장한다
    - 그 이유는 디스크 암을 움직이지 않고 바로 넓은 대역폭에 접근할 수 있기 때문이다

### 데이터 접근 시간

HDD에 저장된 데이터에 접근하는 시간을 보통 `탐색 시간`, `회전 지연 시간`, `전송 시간` 으로 구분할 수 있다.

- 탐색 시간: 헤드를 데이터가 위치한 트랙으로 이동하는 데 소요되는 시간
- 회전 지연 시간: 트랙 위 데이터가 위치한 섹터가 헤드에 오기 까지 걸리는 회전 지연 시간
- 전송 시간: HDD에서 컴퓨터로 데이터가 이동하는데 소요되는 시간

위 시간들은 생각보다 유의미한 의미를 갖는다.

캐시와 메모리에서 데이터를 참조하는데 소요되는 시간은 10ns 미만이다. 반면, HDD에서 데이터 접근 시간은 0.01초가 소요된다. 또 1MB를 읽을 때, HDD는 메모리에 비해 100배 느리다.

그렇기 때문에, HDD에서 데이터를 참조할 때 발생하는 물리적인 과정을 최적화 하는 것이 중요하다. 그래서 실린더에 연관된 데이터를 함께 쓰거나, 다중 헤드 디스크를 사용해 탐색 시간을 없애는 최적화 기술들을 사용한다.

## 플래시 메모리

플래시 메모리는 USB, SD 카드, SSD에 사용되는 반도체 기반이 전기적 저장 장치이다.

> 플래시 메모리에는 두 가지 종류가 있다. 바로 NAND 플래시와 NOR 플래시이다. 그 중 일반적으로 NAND 회로를 기반으로 만들어진 NAND 플래시가 더욱 일반적으로 사용된다.
> 

### 플래시 메모리 저장 단위

플래시 메모리를 구성하는 가장 작은 저장 단위는 셀이다. 한 셀에 몇 비트를 저장할 수 있느냐에 따 SLC, MLC, TLC로 나뉜다.(각각 1비트, 2비트, 3비트를 저장한다.)

하나의 셀에 비트가 적게 들어갈 수록 아래 특성을 갖는다

- 수명이 더 길다
- 읽고 쓰는 속도가 더 빠르다
- 비싸다

### 가비지 컬렉션

- 플래시 메모리에서 셀 보다 더 상위의 단위도 존재한다. 그 계층 단위는 아래와 같다.

`셀 < 페이지 < 블록 < 플레인 < 다이`

- 플래시 메모리에서 쓰고 읽는 단위는 페이지지만, 삭제 단위는 블록이다.
- 이 때 페이지는 free, valid, invalid의 3개의 상태를 갖는다.
- 메모리 상에서 사용되지 않는 페이지의 상태를 invalid로 두는데, 이 때 메모리 공간이 낭비된다.
- 그래서 가비지 컬렉션을 동작한다.

가비지 컬렉션은 valid한 페이지만 다른 블록으로 이전하고 이전 블록은 삭제하는 방식으로 수행된다.

# RAID의 정의와 종류

1TB 하드디스크 4개를 사용하는게 나을까 4TB 하드디스크 하나를 사용하는게 나을까? 정답은, 1TB HDD 4개를 RAID로 구성하는 것이 성능과 안정성 측면에서 낫다. RAID는 무엇이고 왜 이런 차이가 발생하는지 알아보자.

## RAID의 정의

Redunant Array of Independent Disks는 주로 HDD, SDD를 사용하는 기술로, 데이터의 안정성 그리고 높은 성능을 위해 여러 개의 물리 기억 장치를 하나의 거대한 논리 기억 장치로 사용하는 기술이다.

## RAID의 종류

RAID를 구성하는 방식에는 여러가지가 있다. 각 방식에 따라 레벨로 구분하는데 이를 RAID 레벨이라고 한다. RAID 레벨에는 RAID 0, RAID 1, RAID2, …이 존재한다.

### RAID 0

![https://i2.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-1.jpg?w=800&ssl=1](https://i2.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-1.jpg?w=800&ssl=1)

- RAID 0은 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 방식이다.
- 하나의 데이터를 여러 개의 디스크에 나누어 저장한다
- 이 때 줄무늬처럼 데이터가 나뉘어진다고 하여 striping이라고도 한다
- disk 4개로 RAID 0 구성을 한 경우 하나의 disk를 사용할 때에 비해 4배 더 빠르다
- 에러 검출 기능은 따로 없다

### RAID 1

![https://i0.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-2.jpg?w=800&ssl=1](https://i0.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-2.jpg?w=800&ssl=1)

- RAID 1은 디스크 복제본을 두어 안정성을 높인 레벨이다
- 원본 디스크와 정확하게 똑같은 복제본 디스크를 두는데 이를 미러링이라고 한다
- 하나의 데이터를 저장하는데 필요한 용량이 두 배가 되어 비용이 크게 증가한다는 단점이 있다

### RAID 5

![https://i0.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-3.jpg?w=800&ssl=1](https://i0.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-3.jpg?w=800&ssl=1)

- 복제 방식이 아닌 페리티 검출 방식을 통해 데이터의 안정성을 높이는 동시에 공간 효율 역시 향상했다.
- 일반적인 패리티 데이터는 오류 검출 여부만 판별하는데 반해, RAID의 패리티는 데이터를 복구할 수 있다.
- 패리티 비트는 나머지 디스크에 저장된 모든 데이터를 함께 고려해 쓰기 때문에 유독 io에 오래 걸린다.
- 이러한 이유 때문에 패리티 데이터를 여러 디스크에 분산해서 저장한다

### RAID 6

![https://i1.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-4.jpg?w=800&ssl=1](https://i1.wp.com/ipwithease.com/wp-content/uploads/2016/10/what-is-raid-4.jpg?w=800&ssl=1)

- RAID 6는 두 개의 패리티를 사용하는 방식이다
- 패리티를 두 개 사용하므로, 쓰는 속도는 느리지만 더 안정적이다.