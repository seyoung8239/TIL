---
createdAt: 2023-03-23
title: 컴퓨터구조 메모리와 캐시 메모리
summary: 메모리와 캐시 메모리의 사용 방식에 대해 알아보자
categories: ['computer structure', 'memory', 'cache']
---
# 컴퓨터구조:  메모리와 캐시 메모리

# RAM의 특징과 종류

RAM은 일반적으로 컴퓨터의 메모리를 의미한다. RAM의 특징과 역할은 무엇인지 또 어떤 종류가 있는지 살펴보자

## RAM의 특징

RAM의 가장 대표적인 특징은 휘발성 메모리라는 점이다.

반면 HDD, SDD, CD-ROM, USB는 비휘발성 메모리이다

RAM에는 실행할 프로그램을 담고 비휘발성 메모리에는 저장할 데이터를 담는다

## RAM의 용량과 성능

프로그램을 실행하려면 RAM에 적재해야 한다

RAM의 용량이 작은 경우 로딩 없이 돌릴 수 있는 프로그램의 개수 혹은 용량이 커진다

## RAM의 종류

### DRAM

데이터가 동적으로 변하는(사라지는) 데이터를 의미한다. 그렇기에 DRAM의 데이터 소멸을 막기 위해 주기적으로 데이터를 재활성화 해야 한다.

이러한 단점에도 불구하고 메모리에는 일반적으로 DRAM을 사용한다. 그 이유는 아래와 같다.

- 소비전력이 비교적 낮다
- 저렴하다
- 집적도가 높아 대용량으로 설계할 수 있다

### SRAM

SRAM을 DRAM와 상반되게 데이터가 변하지 않고 정적으로 유지되는 RAM을 의미한다. SRAM은 시간이 지나도 데이터가 소멸되지 않는다.(그렇다고 비휘발성은 아니다) 그렇기에 데이터를 재활성화 할 필요 역시 없어진다.

SRAM은 일반적으로 DRAM에 비해 빠르지지만 집적도가 낮고, 소비 전력이 크며, 가격이 더 비싸다. 그래서 대용량일 필요는 없지만 속도는 빨라야 하는 캐시 메모리에 사용된다.

### SDRAM

SDRAM의 S는 Synchronous으로, 동기적으로 동작하는 DRAM이다. 클럭 신호에 동기화 되었다는 말은 클럭 타이밍에 맞추어 CPU와 정보를 주가받을 수 있음을 의미한다. 즉 SDRAM은 클럭에 맞춰 도작하며 클럭마다 CPU와 데이터를 주고받는 DRAM이다

### DDR SDRAM

DDR은 대역폭을 넓힌 SDRAM을 의미한다. 여기서 대역폭이란, 정보를 주고받을 때의 폭을 의미한다. DDR SDRAM은 일반적인 SDRAM에 두 배 넓은 대역폭을 가지고 있다. 그래서 전송 속도 역시 두 배 더 빠르다.

최근에는 SDR SDRAM보다 16배 넓은 대역폭을 가진 DDR4 SDRAM이 많이 사용된다.

# 메모리의 주소 공간

앞서 메모리에 저장된 정보의 위치를 주소로 나타낼 수 있다고 말했다. 그 중 주소에는 두 가지 의미가 있다. 바로 물리 주소와 논리 주소이다.

## 물리 주소와 논리 주소

메모리에 저장된 데이터는 시시각각 변한다. 여러 프로그램이 메모리에 적재되고 또 삭제되기 때문이다. 그러니까 프로그램을 실행할 때마다 메모리에 적재되는 위치는 바뀔 수 있다. 이런 상황에서 프로그램과 CPU가 적재되는 위치를 매번 알고 있는 것은 다소 비효율적이다. 그래서 등장한 것이 논리 주소이다.

앞서 말했듯이 메모리 주소에는 물리 주소와 논리 주소가 있다. 물리 주소란 말 그대로 정보가 실제로 저장된 하드웨어상의 주소를 의미한다. 반면, CPU와 프로그램이 사용하는 주소는 논리 주소이다. 각각의 프로그램은 0번지 부터 시작하는 각자의 논리주소를 갖고 있다. address space라고도 한다.

그렇다면 어떻게 논리 주소를 가지고 물리 주소에 있는 데이터를 가져올 수 있을까. 이 변환작업을 도와주는 부품이  바로 Memory Management Unit이다. MMU는 CPU가 발생시킨 논리 주소에 MMU 내부의 베이스 레지스터 값을 더해 물리 주소를 계산한다. 즉 베이스 레지스터는 프로그램이 저장된 첫 주소를 저장하고, CPU가 가져온 논리 주소는 해당 시작점으로 부터 떨어진 offset이다.

## 메모리 보호 기법

단순히 CPU가 보낸 주소에 베이스 레지스터를 더하는 방식으로 메모리를 접근하게 되면 타 프로그램의 메모리를 침범할 위험이 존재한다. 이런 상황을 방지하기 위해 메모리 보호 기법이 등장했다. 가장 대표적인 메모리 보호 기법은 한계 레지스터를 활용하는 것이다. 한계 레지스터를 통해 CPU가 보낸 논리 주소가 한계 레지스터의 값보다 작은 경우에만 물리주소로 변경할 수 있다.

# 캐시 메모리

컴퓨터 내부에서는 다양한 메모리를 사용한다. 이 다양한 메모리들은 저장 장치 계층 구조라는 피라미드 형태의 계층 구조를 갖는다. 왜 이런 계층 구조가 필요한지 그리고 캐시의 역할과 위치는 어디인지 알아보자.

## 저장 장치 계층 구조

모든 저장 장치는 trade-off적인 성향을 갖는다. 그러니까 싸고 빠른 저장 장치는 없다는 의미이다.

가격 대비 최적의 성능을 끌어내기 위해 다양한 저장장치를 계층적으로 사용한다.

## 캐시 메모리

캐시 메모리는 CPU와 메모리 사이에 위치한다. 레지스터에 비해 가성비가 좋고, DRAM에 비해 속도가 빠른 SRAM 기반의 저장 장치이다.

컴퓨터 내부에는 여러 개의 캐시 메모리가 존재한다. CPU에 가까운 순으로 L1, L2, L3 캐시 메모리가 존재한다. 그 중 L1, L2 캐시는 CPU 내부에 그리고 L3는 CPU 외부에 존재한다.

## 참조 지역성 원리

저장 장치 계층 구조에서 상위의 저장 장치들은 더 제한된 용량을 갖는다. 그렇다면 이 제한된 용량에 무엇을 저장해야 할까? 캐시 메모리는 최대한 CPU가 사용할 법한 대상을 예측하여 저장한다.

캐시 메모리는 한 가지 원칙에 따라 메모리로부터 가져올 데이터를 결정한다. 바로 참조 지역성의 원리이다. 참조 지역성의 원리의 종류로 아래 두 가지가 있다.

1. CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
2. CPU는 최근에 접근했던 메모리 공간 인근 메모리에 접근하려는 경향이 있다.